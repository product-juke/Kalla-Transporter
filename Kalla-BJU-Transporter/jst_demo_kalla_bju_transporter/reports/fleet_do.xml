<odoo>
    <template id="header_session">
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <div class="header">
            <div class="row mt32 mb32">
                <div class="col-6">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 100px;"/>
                </div>
                <div class="col-6 text-right">
                    <span t-field="company.partner_id"/>
                    <br/>
                    <span t-field="company.partner_id.street"/>
                    <br/>
                    <span t-field="company.partner_id.city"/>
                    <br/>
                    <span t-field="company.partner_id.country_id"/>
                    <br/>
                    <span t-field="company.partner_id.vat"/>
                    <br/>
                </div>
            </div>
        </div>
    </template>

    <template id="body_session">
        <t t-foreach="docs" t-as="rec">
            <div style="page-break-before: always;">
                <div class="page">
                    <div style="text-align: center; font-weight: bold; font-size: 18pt; margin-bottom: 10px;">
                        <t t-esc="rec.name if rec.name else '-'"/>
                    </div>
                    <br/>
                    <table style="width: 100%;">
                        <tr style="font-weight: bold; font-size: 12px;">
                            <td style="width: 20%;">
                                <p>DO</p>
                                <p>Category</p>
                                <p>Fleet</p>
                                <p>Driver</p>
                            </td>
                            <td style="width: 30%;">
                                <p>: <t t-esc="rec.name if rec.name else '-'"/></p>
                                <p>: <t t-esc="rec.category_id.name if rec.category_id.name else '-'"/></p>
                                <p>: <t t-esc="rec.vehicle_id.name if rec.vehicle_id.name else '-'"/></p>
                                <p>: <t t-esc="rec.driver_id.name if rec.driver_id.name else '-'"/></p>
                            </td>
                            <td style="width: 20%;">
                                <p>Date</p>
                                <p>Customer</p>
                                <p>Tags</p>
                            </td>
                            <td style="width: 30%;">
                                <p>: <t t-esc="rec.date.strftime('%d/%m/%Y') if rec.date else '-'"/></p>
                                <p>: <t t-esc="rec.partner_id.name if rec.partner_id.name else '-'"/></p>
                                <p>: <t t-esc="', '.join(rec.tag_ids.mapped('name')) if rec.tag_ids.ids else '-'"/></p>
                            </td>
                        </tr>
                    </table>

                    <table style="width: 100%;">
                        <tr style="font-weight: bold; font-size: 12px;">
                            <td style="width: 20%;">
                                <p>Note</p>
                            </td>
                            <td style="width: 80%;">
                                <p>: <t t-esc="rec.note if rec.note else '-'"/></p>
                            </td>
                        </tr>
                    </table>
                </div>
                <br/>
                <t t-if="rec.po_line_ids">
                    <table style="width: 100%; border-collapse: collapse; font-size: 10px;" border="1">
                        <tr>
                            <th style="text-align: center; padding: 5px;">No</th>
                            <th style="text-align: center; padding: 5px;">Order Reference</th>
                            <th style="text-align: center; padding: 5px;">CE Code</th>
                            <th style="text-align: center; padding: 5px;">Category Unit</th>
                            <th style="text-align: center; padding: 5px;">Origin</th>
                            <th style="text-align: center; padding: 5px;">Destination</th>
                            <th style="text-align: center; padding: 5px;">Qty Tonase</th>
                            <th style="text-align: center; padding: 5px;">Qty Kubikasi</th>
                            <th style="text-align: center; padding: 5px;">Qty Unit/PCS</th>
                            <th style="text-align: center; padding: 5px;">Qty Dus/Box</th>
                            <th style="text-align: center; padding: 5px;">Unit Price</th>
<!--                            <th style="text-align: center; padding: 5px;">BOP Type</th>-->
<!--                            <th style="text-align: center; padding: 5px;">Status</th>-->
                        </tr>

                        <t t-set="count" t-value="0"/>
                        <t t-set="total_unit_price" t-value="0"/>
                        <t t-foreach="rec.po_line_ids" t-as="line">
                            <t t-set="count" t-value="count + 1"/>
                            <t t-set="total_unit_price" t-value="total_unit_price + line.price_unit"/>
                            <tr>
                                <th style="text-align: center;"><t t-esc="count"/></th>
                                <td style="text-align: center;"><t t-esc="line.order_id.name"/></td>
                                <td style="text-align: center;"><t t-esc="line.id_contract"/></td>
                                <td style="text-align: center;"><t t-esc="line.product_template_id.name"/></td>
                                <td style="text-align: center;"><t t-esc="line.origin_id.name"/></td>
                                <td style="text-align: center;"><t t-esc="line.destination_id.name"/></td>
                                <td style="text-align: center;"><t t-esc="line.qty_tonase"/></td>
                                <td style="text-align: center;"><t t-esc="line.qty_kubikasi"/></td>
                                <td style="text-align: center;"><t t-esc="line.qty_unit"/></td>
                                <td style="text-align: center;"><t t-esc="line.qty_dus"/></td>
<!--                                <td style="text-align: center;"><t t-esc="line.x_studio_satuan.name"/></td>-->
                                <td style="text-align: center;">Rp <span t-esc="'{:,.2f}'.format(line.price_unit)"/></td>
<!--                                <td style="text-align: center;"><t t-esc="line.bop_type"/></td>-->
<!--                                <td style="text-align: center;"><t t-esc="dict(line.fields_get(allfields=['status'])['status']['selection'])[line.status]"/></td>-->
                            </tr>
                        </t>
                    </table>
                </t>
                <br/>
                <br/>
                <table>
                    <tr>
                        <th style="text-align: center; padding: 11px;">Operation SPV</th>
                        <th style="text-align: center; padding: 11px;">Cashier</th>
                        <th style="text-align: center; padding: 11px;">ADH</th>
                        <th style="text-align: center; padding: 11px;">Kepala Cabang</th>
                    </tr>
                    <tr>
                        <td style="width: 20%"><img t-attf-src="data:image/jpg;base64,{{rec.approval_by_operation_spv.sign_signature}}"  width="200px" height="100px"/>
                            <br/>Approved By : <field name="rec.approval_by_operation_spv.name"/>
                        </td>
                        <td style="width: 20%"><img t-attf-src="data:image/jpg;base64,{{rec.approval_by_cashier.sign_signature}}"  width="200px" height="100px"/>
                            <br/>Approved By : <field name="rec.approval_by_cashier.name"/>
                        </td>
                        <td style="width: 20%"><img t-attf-src="data:image/jpg;base64,{{rec.approval_by_adh.sign_signature}}"  width="200px" height="100px"/>
                            <br/>Approved By : <field name="rec.approval_by_adh.name"/>
                        </td>
                        <td style="width: 20%"><img t-attf-src="data:image/jpg;base64,{{rec.approval_by_kacab.sign_signature}}"  width="200px" height="100px"/>
                            <br/>Approved By :<field name="rec.approval_by_kacab.name"/>
                        </td>
                    </tr>
                </table>
            </div>
        </t>
    </template>
    <template id="report_do_pdf">
        <t t-call="web.html_container">
            <t t-call="jst_demo_kalla_bju_transporter.header_session"/>
            <t t-call="jst_demo_kalla_bju_transporter.body_session"/>
        </t>
    </template>
</odoo>