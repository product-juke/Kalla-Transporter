<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="transporter_view_partner_tree" model="ir.ui.view">
        <field name="name">res.partner.tree</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='email']" position="after">
                <field name="show_field" invisible="True"/>
                <field name="is_driver" optional="hide" column_invisible="show_field == 'Frozen'"/>
                <field name="is_customer" optional="hide" column_invisible="show_field == 'Frozen'"/>
<!--                <field name="product_filter_id" column_invisible="True"/>-->
                <field name="product_filter_ids" column_invisible="True"/>
                <field name="availability" column_invisible="True"/>
                <field name="license_expiry" string="License Expiry" widget="remaining_days" column_invisible="True"/>
                <field name="is_license_expiring" string="Is Expiry" invisible="not is_driver"/>
            </xpath>
        </field>
    </record>

    <record id="transporter_view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[1]/group[1]" position="inside">
                <field name="show_field" invisible="True"/>
                <field name="bank_cash" invisible="show_field == 'Frozen'"/>
                <field name="is_driver" invisible="True"/>
                <field name="is_customer" invisible="True"/>
                <field name="header_bop" invisible="show_field == 'Frozen'"/>
            </xpath>
            <xpath expr="//span[@name='address_name']" position="before">
                <field name="ktp" invisible="not is_driver"/>
                <field name="nid" invisible="not is_driver"/>
                <field name="vehicle_id" invisible="not is_driver"/>
            </xpath>
            <xpath expr="//field[@name='category_id']" position="after">
                <field name="show_field" invisible="1"/>
                <field name="is_customer" invisible="True"/>
                <field name="availability" invisible="is_customer and show_field == 'Frozen'"/>
                <field name="is_tam" readonly="0" invisible="not is_customer or is_vendor or show_field == 'Frozen'"/>
                <field name="is_vendor" readonly="is_driver and show_field != False" invisible="show_field == 'Frozen'"/>
                <field name="supplier_site" invisible="not is_vendor or show_field == 'Frozen'"/>
            </xpath>
            <xpath expr="//field[@name='availability']" position="after">
                <field name="is_driver" invisible="True"/>
                <field name="no_driving_license" string="No Driving License" invisible="not is_driver or show_field == 'Frozen'"/>
                <field name="license_type" invisible="not is_driver or show_field == 'Frozen'"/>
                <field name="license_expiry" string="License Expiry" invisible="not is_driver or show_field == 'Frozen'"/>
                <field name="is_license_expiring" string="IS Expiry" invisible="not is_driver or show_field == 'Frozen'"/>
            </xpath>
            <xpath expr="//field[@name='bank_cash']" position="before">
                <field name="complete_name" invisible="1" required="show_field != False"/>
                <field name="is_customer" invisible="True"/>
                <field name="tax_id_address" string="Tax ID Address" invisible="not is_customer and show_field == 'Frozen'"/>
                <!-- <field name="bank_name" domain="[('partner_id', '=', id)]" context="{'default_partner_id': commercial_partner_id}" required="1" string="Nama Bank" invisible="not is_driver and show_field == 'Frozen'"/> -->
            </xpath>
            <xpath expr="//span[@name='address_name']" position="before">
                <field name="customer_product_ids" widget="many2many_tags" invisible="not is_customer and show_field == 'Frozen'"/>
                <field name="customer_code" invisible="not is_customer"/>
                <field name="customer_category" invisible="not is_customer"/>
                <field name="customer_group" string="Group Customer" invisible="not is_customer and show_field == 'Frozen'"/>
<!--            <field name="product_filter_id" string="Product Filter" invisible="not is_customer"/>-->
                <field name="product_filter_ids" string="Product Filter" invisible="not is_customer"/>
            </xpath>
            <xpath expr="//span[@name='address_name']" position="before">
                <field name="customer_ids" widget="many2many_tags" invisible="not is_driver and show_field == 'Frozen'"/>
            </xpath>
            <xpath expr="//group[@name='accounting_entries']" position="after">
                <group string="Tax Configuration" name="tax_configuration" groups="jst_lms_group.group_logistic_lms_marketing,jst_lms_group.group_logistic_lms_plan_armada,jst_lms_group.group_logistic_lms_spv,jst_lms_group.group_logistic_lms_cashier,jst_lms_group.group_logistic_lms_revenue_control,jst_lms_group.group_logistic_lms_kacab,jst_lms_group.group_logistic_lms_adh,jst_lms_group.group_logistic_lms_doc_delivery">
                    <field name="tax_invoicing_method"/>
                    <field name="partner_tax_ids" widget="many2many_tags"/>
                </group>
            </xpath>
            <field name="vat" position="attributes">
                <attribute name="required">is_company and show_field != False</attribute>
            </field>
            <field name="city" position="attributes">
                <attribute name="required">show_field != False</attribute>
            </field>
            <field name="state_id" position="attributes">
                <attribute name="required">show_field != False</attribute>
            </field>
            <field name="zip" position="attributes">
                <attribute name="required">show_field != False</attribute>
            </field>
            <field name="country_id" position="attributes">
                <attribute name="required">show_field != False</attribute>
            </field>
            <field name="email" position="attributes">
                <attribute name="required">show_field != False</attribute>
            </field>
        </field>
    </record>
    <record id="transporter_view_partner_kanban" model="ir.ui.view">
        <field name="name">res.partner.kanban</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <field name="display_name" position="after">
                <field name="show_field" invisible="True"/>
                <field name="license_expiry" invisible="True"/>
                <field name="is_license_expiring" invisible="True"/>
            </field>
            <xpath expr="//div[hasclass('o_kanban_record_bottom')]" position="after">
                <div t-if="record.license_expiry.raw_value and record.show_field.raw_value != False" class="mt-2">
                    <small>Expiry: </small>
                    <strong t-esc="record.license_expiry.raw_value"/>
                </div>
                <div t-if="record.is_license_expiring.raw_value and record.show_field.raw_value != False" class="oe_kanban_badge text-bg-danger mt-2">
                  ðŸ””  SIM akan kedaluwarsa dalam 30 hari!
                </div>
            </xpath>
        </field>
    </record>
    <record id="transporter_res_partner_form" model="ir.ui.view">
        <field name="name">transporter.res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form string="Partners">
                <field name="show_field" invisible="1"/>
                <div class="alert alert-warning oe_edit_only" role="alert" name="warning_tax" invisible="not same_vat_partner_id">
                  A partner with the same <span><span class="o_vat_label">Tax ID</span></span> already exists (<field name="same_vat_partner_id"/>
                <field name="partner_gid" invisible="True"/>
                <field name="additional_info" invisible="True"/>), are you sure to create a new one?
                </div>
                <div class="alert alert-warning oe_edit_only" role="alert" name="warning_company" invisible="not same_company_registry_partner_id">
                  A partner with the same <span><span class="o_vat_label">Company Registry</span></span> already exists (<field name="same_company_registry_partner_id"/>), are you sure to create a new one?
                </div>
                <div groups="account.group_account_invoice,account.group_account_readonly" class="alert alert-warning" role="alert" style="margin-bottom:0px;" invisible="duplicated_bank_account_partners_count == 0">
                    One or more Bank Accounts set on this partner are also used by other <bold><button class="alert-link" type="object" name="action_view_partner_with_same_bank" role="button" string="Partners" style="padding: 0;vertical-align: baseline;"/></bold>. Please make sure that this is a wanted behavior.
                </div>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="schedule_meeting" icon="fa-calendar" context="{'partner_id': id, 'partner_name': name}">
                            <field string="Meetings" name="meeting_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button o_res_partner_tip_opp" type="object" name="action_view_opportunity" icon="fa-star" groups="sales_team.group_sale_salesman" context="{'default_partner_id': id, 'default_type':'opportunity'}">
                            <field string="Opportunities" name="opportunity_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_view_sale_order" groups="sales_team.group_sale_salesman" icon="fa-usd">
                            <field string="Sales" name="sale_order_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" name="542" type="action" groups="purchase.group_purchase_user" icon="fa-credit-card">
                            <field string="Purchases" name="purchase_order_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" name="586" type="action" groups="purchase.group_purchase_user" icon="fa-truck" context="{'search_default_partner_id': id}">
                            <div class="o_form_field o_stat_info">
                                <div class="o_row" invisible="on_time_rate &lt; 0">
                                    <span class="o_stat_value">
                                        <field string="On-time Rate" name="on_time_rate" widget="integer"/>
                                    </span>
                                    <span class="o_stat_value">%</span>
                                </div>
                                <div class="o_stat_value" invisible="on_time_rate &gt;= 0">
                                    No data yet
                                </div>
                                <span class="o_stat_text">On-time Rate</span>
                            </div>
                        </button>
                        <button groups="account.group_account_invoice" type="object" class="oe_stat_button" name="open_action_followup" icon="fa-list" invisible="total_due == 0">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value"><field name="total_due" widget="monetary" options="{'currency_field': 'currency_id'}"/></span>
                                <span class="o_stat_text">Due</span>
                            </div>
                        </button>
                        <button type="object" class="oe_stat_button" icon="fa-pencil-square-o" name="action_view_partner_invoices" groups="account.group_account_invoice,account.group_account_readonly" context="{'default_partner_id': id}">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="currency_id" invisible="1"/>
                                    <field name="total_invoiced" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </span>
                                <span class="o_stat_text">Invoiced</span>
                            </div>
                        </button>
                        <button class="oe_stat_button" name="543" type="action" groups="account.group_account_invoice" icon="fa-pencil-square-o" help="Vendor Bills">
                            <field string="Vendor Bills" name="supplier_invoice_count" widget="statinfo"/>
                        </button>
                        <button type="object" groups="account.group_account_invoice" class="oe_stat_button" id="partner_ledger_button" icon="fa-pencil-square-o" name="open_partner_ledger" title="Partner Ledger" context="{'default_partner_id': id}">
                            <div class="o_stat_info">
                                <span class="o_stat_text">Partner Ledger</span>
                            </div>
                        </button>
                        <button type="action" class="oe_stat_button" icon="fa-credit-card-alt" name="294" context="{'search_default_partner_id': id, 'create': False, 'edit': False}" invisible="payment_token_count == 0" groups="sales_team.group_sale_salesman">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_value">
                                    <field name="payment_token_count" widget="statinfo" nolabel="1"/>
                                </span>
                                <span class="o_stat_text">Saved Payment Methods</span>
                            </div>
                        </button>
                        <button name="action_open_employees" type="object" class="oe_stat_button" icon="fa-id-card-o" groups="hr.group_hr_user" invisible="employees_count == 0">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value"><field name="employees_count"/></span>
                                <span class="o_stat_text">Employee</span>
                            </div>
                        </button>
                        <button name="action_view_diciplinaries" type="object" class="oe_stat_button" icon="oi-group" invisible="not is_driver">
                            <field name="diciplinary_count" widget="statinfo" string="Diciplinary Record"/>
                        </button>
                    </div>
                    <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                    <field name="avatar_128" invisible="1"/>
                    <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}"/>
                    <div class="oe_title mb24">
                        <field name="is_company" invisible="1"/>
                        <field name="commercial_partner_id" invisible="1"/>
                        <field name="active" invisible="1"/>
                        <field name="company_id" invisible="1"/>
                    <field name="fiscal_country_codes" invisible="1"/>
                    <field name="country_code" invisible="1"/>
                    <field name="company_type" widget="radio" options="{'horizontal': true}"/>
                        <h1>
                            <field id="company" options="{'line_breaks': False}" widget="text" class="text-break" name="name" default_focus="1" placeholder="e.g. Lumber Inc" invisible="not is_company" required="type == 'contact'"/>
                            <field id="individual" options="{'line_breaks': False}" widget="text" class="text-break" name="name" default_focus="1" placeholder="e.g. Brandom Freeman" invisible="is_company" required="type == 'contact'"/>
                        </h1>
                        <div class="o_row">
                            <field name="parent_id" widget="res_partner_many2one" placeholder="Company Name..." domain="[('is_company', '=', True)]" context="{'default_is_company': True, 'show_vat': True, 'default_user_id': user_id, 'default_team_id': team_id}" invisible="((is_company and not parent_id) or company_name) and company_name != ''"/>
                                <field name="company_name" invisible="not company_name or company_name == '' or is_company"/>
                                <button name="create_company" icon="fa-plus-square" string="Create company" type="object" class="oe_edit_only btn-link" invisible="is_company or company_name == '' or not company_name"/>
                        </div>
                    </div>

                    <group>
                        <group>
                            <field name="ktp" invisible="not is_driver and is_company" required="is_driver or not is_company"/>
                            <field name="nid" invisible="not is_driver"/>
                            <field name="vehicle_id" invisible="not is_driver"/>
                            <field name="customer_product_ids" widget="many2many_tags" invisible="not is_customer"/>
                            <field name="customer_code" invisible="not is_customer"/>
                            <field name="customer_category" invisible="not is_customer"/>
                            <field name="customer_group" string="Group Customer" invisible="not is_customer"/>
<!--                            <field name="product_filter_id" string="Product Filter" invisible="not is_customer"/>-->
                            <field name="product_filter_ids" string="Product Filter" invisible="not is_customer"/>
                            <field name="customer_ids" widget="many2many_tags" invisible="not is_driver"/>
                            <span class="o_form_label o_td_label" name="address_name">
                                <field name="type" invisible="is_company" readonly="user_ids" required="not is_company" class="fw-bold" groups="account.group_delivery_invoice_address"/>
                                <field name="type" invisible="1"/>
                                <b invisible="not is_company">Address</b>
                            </span>
                            <div class="o_address_format">
                                <field name="street" placeholder="Street..." class="o_address_street" readonly="type == 'contact' and parent_id" required="1"/>
                                <field name="street2" placeholder="Street 2..." class="o_address_street" readonly="type == 'contact' and parent_id"/>
                                <field name="city" placeholder="City" class="o_address_city" readonly="type == 'contact' and parent_id" required="1"/>
                                <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" readonly="type == 'contact' and parent_id" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}" required="1"/>
                                <field name="zip" placeholder="ZIP" class="o_address_zip" readonly="type == 'contact' and parent_id" required="1"/>
                                <div name="partner_address_country" class="d-flex justify-content-between">
                                    <field name="country_id" placeholder="Country" class="o_address_country" options="{'no_open': True, 'no_create': True}" readonly="type == 'contact' and parent_id" required="1"/>
                                </div>
                            </div>
                            <field name="perform_vies_validation" invisible="1"/>
                            <label for="vat" string="Tax ID"/>
                            <div>
                                <field name="vat" placeholder="e.g. BE0477472701" readonly="parent_id" class="oe_inline" required="1"/>
                                <field name="l10n_id_pkp" invisible="country_id and country_code != 'ID'"/>
                                <label for="vies_valid" invisible="not perform_vies_validation"/>
                                <field name="vies_valid" invisible="not perform_vies_validation"/>
                            </div>
                            <field name="complete_name" invisible="1" required="1"/>
                            <field name="is_customer" invisible="True"/>
                            <field name="tax_id_address" string="Tax ID Address" invisible="not is_customer"/>
                            <field name="bank_name" string="Nama Bank" invisible="not is_driver"/>
                            <field name="bank_cash"/>
                            <field name="is_driver" invisible="True"/>
                            <field name="is_customer" invisible="True"/>
                            <field name="header_bop"/>
                        </group>
                        <group>
                            <field name="function" placeholder="e.g. Sales Director" invisible="is_company"/>
                            <field name="phone_blacklisted" invisible="1"/>
                            <field name="mobile_blacklisted" invisible="1"/>
                            <label for="phone" class="oe_inline"/>
                            <div class="o_row o_row_readonly">
                                <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger" title="This phone number is blacklisted for SMS Marketing. Click to unblacklist." type="object" context="{'default_phone': phone}" groups="base.group_user" invisible="not phone_blacklisted"/>
                                <field name="phone" widget="phone"/>
                            </div>
                            <field name="phone_blacklisted" invisible="1"/>
                            <field name="mobile_blacklisted" invisible="1"/>
                            <label for="mobile" class="oe_inline"/>
                            <div class="o_row o_row_readonly">
                                <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger" title="This phone number is blacklisted for SMS Marketing. Click to unblacklist." type="object" context="{'default_phone': mobile}" groups="base.group_user" invisible="not mobile_blacklisted"/>
                                <field name="mobile" widget="phone"/>
                            </div>
                            <field name="phone_sanitized" groups="base.group_no_one" invisible="1"/>
                            <field name="user_ids" invisible="1"/>
                            <field name="is_blacklisted" invisible="1"/>
                                <label for="email" class="oe_inline"/>
                                <div class="o_row o_row_readonly">
                                    <button name="mail_action_blacklist_remove" class="fa fa-ban text-danger" title="This email is blacklisted for mass mailings. Click to unblacklist." type="object" context="{'default_email': email}" groups="base.group_user" invisible="not is_blacklisted"/>
                                    <field name="email" widget="email" context="{'gravatar_image': True}" required="1"/>
                                </div>
                            <field name="website" string="Website" widget="url" placeholder="e.g. https://www.odoo.com"/>
                            <field name="title" options="{&quot;no_open&quot;: True}" placeholder="e.g. Mister" invisible="is_company"/>
                            <field name="active_lang_count" invisible="1"/>
                            <field name="partner_longitude" invisible="1"/>
                            <field name="partner_latitude" invisible="1"/>
                            <field name="lang" invisible="active_lang_count &lt;= 1"/>
                            <field name="category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" placeholder="e.g. &quot;B2B&quot;, &quot;VIP&quot;, &quot;Consulting&quot;, ..."/>
                            <field name="is_customer" invisible="True"/>
                            <field name="availability" invisible="is_customer"/>
                            <field name="is_vendor" readonly="is_driver" invisible="show_field == 'Frozen'"/>
                            <field name="supplier_site" invisible="not is_vendor or show_field == 'Frozen'"/>
                            <field name="is_driver" invisible="True"/>
                            <field name="no_driving_license" string="No Driving License" invisible="not is_driver"/>
                            <field name="license_type" invisible="not is_driver or show_field == 'Frozen'"/>
                            <field name="license_expiry" string="License Expiry" invisible="not is_driver"/>
                            <field name="is_license_expiring" string="IS Expiry" invisible="not is_driver"/>
                        </group>
                    </group>

                    <notebook colspan="4">
                        <page string="Contacts &amp; Addresses" name="contact_addresses" autofocus="autofocus">
                            <field name="child_ids" mode="kanban" context="{'default_parent_id': id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_lang': lang, 'default_user_id': user_id, 'default_type': 'other'}">
                                <kanban>
                                    <field name="id"/>
                                    <field name="color"/>
                                    <field name="name"/>
                                    <field name="title"/>
                                    <field name="type" groups="account.group_delivery_invoice_address"/>
                                    <field name="type" invisible="1"/>
                                    <field name="email"/>
                                    <field name="parent_id"/>
                                    <field name="is_company"/>
                                    <field name="function"/>
                                    <field name="phone"/>
                                    <field name="street"/>
                                    <field name="street2"/>
                                    <field name="zip"/>
                                    <field name="city"/>
                                    <field name="country_id"/>
                                    <field name="mobile"/>
                                    <field name="state_id"/>
                                    <field name="image_128"/>
                                    <field name="avatar_128"/>
                                    <field name="lang"/>
                                    <!-- fields in form x2many view to diminish requests -->
                                    <field name="comment"/>
                                    <field name="display_name"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                                            <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
                                                <div class="o_kanban_image">
                                                    <img alt="Contact image" t-att-src="kanban_image('res.partner', 'avatar_128', record.id.raw_value)"/>
                                                </div>
                                                <div class="oe_kanban_details">
                                                    <field name="name"/>
                                                    <div t-if="record.function.raw_value"><field name="function"/></div>
                                                    <div t-if="record.email.raw_value"><field name="email" widget="email"/></div>
                                                    <div t-if="record.type.raw_value != 'contact'">
                                                        <div>
                                                            <field name="zip"/><t t-if="record.city"> </t>
                                                            <field name="city"/>
                                                        </div>
                                                        <field t-if="record.state_id.raw_value" name="state_id"/><t t-if="record.country_id"> </t>
                                                        <field name="country_id"/>
                                                    </div>
                                                    <div t-if="record.phone.raw_value">Phone: <t t-esc="record.phone.value"/></div>
                                                    <div t-if="record.mobile.raw_value">Mobile: <t t-esc="record.mobile.value"/></div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                                <form string="Contact / Address">
                                    <sheet>
                                        <field name="type" required="1" widget="radio" options="{'horizontal': true}"/>
                                        <field name="parent_id" invisible="1"/>
                                        <div class="text-muted oe_edit_only">
                                            <p class="mb-0" invisible="type != 'contact'">
                                                <span>Use this to organize the contact details of employees of a given company (e.g. CEO, CFO, ...).</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'invoice'">
                                                <span>Preferred address for all invoices. Selected by default when you invoice an order that belongs to this company.</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'delivery'">
                                                <span>Preferred address for all deliveries. Selected by default when you deliver an order that belongs to this company.</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'other'">
                                                <span>Other address for the company (e.g. subsidiary, ...)</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'followup'">
                                                <span>Preferred address for follow-up reports. Selected by default when you send reminders about overdue invoices.</span>
                                            </p>
                                        </div>
                                        <hr/>
                                        <group>
                                            <group>
                                                <field name="name" string="Contact Name" required="type == 'contact'"/>
                                                <field name="title" options="{'no_open': True}" placeholder="e.g. Mr." invisible="type != 'contact'"/>
                                                <field name="function" placeholder="e.g. Sales Director" invisible="type != 'contact'"/>
                                                <label for="street" string="Address" invisible="type == 'contact'"/>
                                                <div invisible="type == 'contact'">
                                                    <div class="o_address_format" name="div_address">
                                                        <field name="street" placeholder="Street..." class="o_address_street"/>
                                                        <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                                        <field name="city" placeholder="City" class="o_address_city"/>
                                                        <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"/>
                                                        <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                                        <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                                    </div>
                                                </div>
                                            </group>
                                            <group>
                                                <field name="email" widget="email"/>
                                                <field name="phone" widget="phone"/>
                                                <field name="mobile" widget="phone"/>
                                                <field name="company_id" invisible="1"/>
                                            </group>
                                        </group>
                                        <group>
                                            <field name="comment" placeholder="Internal notes..." nolabel="1" colspan="2"/>
                                        </group>
                                        <field name="lang" invisible="True"/>
                                        <field name="user_id" invisible="True"/>
                                    </sheet>
                                </form>
                            </field>
                        </page>
                        <page name="sales_purchases" string="Sales &amp; Purchase">
                            <group name="container_row_2">
                                <group string="Sales" name="sale" priority="1">
                                    <field name="user_id" widget="many2one_avatar_user" domain="[('share', '=', False)]"/>
                    <field name="team_id" invisible="1"/>
                    <field name="team_id" groups="base.group_no_one" kanban_view_ref="632"/>
                    <field string="Payment Terms" name="property_payment_term_id" options="{'no_open': True, 'no_create': True}" groups="account.group_account_invoice, sales_team.group_sale_salesman"/>
                    <field name="property_product_pricelist" groups="product.group_product_pricelist" invisible="not is_company and parent_id"/>
                    <div name="parent_pricelists" groups="product.group_product_pricelist" colspan="2" invisible="is_company or not parent_id">
                        <p>Pricelists are managed on <button name="open_commercial_entity" type="object" string="the parent company" class="oe_link"/></p>
                    </div>
                                </group>
                                <group string="Purchase" name="purchase" priority="2">
                    <field name="buyer_id" domain="[('share', '=', False)]" widget="many2one_avatar_user"/>
                    <field string="Payment Terms" name="property_supplier_payment_term_id" options="{'no_open': True, 'no_create': True}" groups="account.group_account_invoice, sales_team.group_sale_salesman"/>
                    <div name="receipt_reminder" colspan="2" class="o_checkbox_optional_field" groups="purchase.group_send_reminder">
                        <label for="receipt_reminder_email"/>
                        <field name="receipt_reminder_email"/>
                        <div invisible="not receipt_reminder_email">
                            <field name="reminder_date_before_receipt" class="oe_inline"/>
                            <span> day(s) before</span>
                        </div>
                    </div>
                    <field name="property_purchase_currency_id" options="{'no_create': True, 'no_open': True}" groups="base.group_multi_currency"/>
                                </group>
                    <group string="Fiscal Information" name="fiscal_information" priority="5" groups="account.group_account_invoice, sales_team.group_sale_salesman">
                        <field name="property_account_position_id" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                                <group name="misc" string="Misc">
                                    <field name="company_registry" invisible="parent_id"/>
                                    <field name="ref" string="Reference"/>
                                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" readonly="parent_id" force_save="1"/>
                                    <field name="industry_id" invisible="not is_company" options="{'no_create': True}"/>
                                </group>
                    <group name="container_row_stock" groups="base.group_no_one" priority="6">
                        <group string="Inventory" name="inventory" colspan="2">
                            <field name="property_stock_customer"/>
                            <field name="property_stock_supplier"/>
                        </group>
                    </group>
                            </group>
                        </page>
                    <page string="Accounting" name="accounting" invisible="not is_company and parent_id" groups="account.group_account_invoice,account.group_account_readonly">
                        <field name="duplicated_bank_account_partners_count" invisible="1"/>
                        <field name="show_credit_limit" invisible="1"/>
                        <group>
                            <group string="Bank Accounts" name="banks" groups="account.group_account_invoice,account.group_account_readonly">
                                <field name="bank_ids" nolabel="1" colspan="2" context="{'default_partner_id': id}" widget="auto_save_res_partner">
                                    <tree>
                                        <field name="sequence" widget="handle"/>
                                        <field name="acc_number" widget="iban"/>
                                        <field name="bank_id"/>
                                        <field name="allow_out_payment"/>
                                        <field name="acc_holder_name" column_invisible="True"/>
                                    </tree>
                                </field>
                            </group>
                            <group string="Electronic Invoicing" name="electronic_invoicing">
                                <field name="ubl_cii_format" widget="selection"/>
                                <field name="peppol_eas" widget="selection" invisible="ubl_cii_format in ('facturx', False)"/>
                                <field name="peppol_endpoint" invisible="ubl_cii_format in ('facturx', False)"/>
                            </group>
                            <group string="Accounting Entries" name="accounting_entries" groups="account.group_account_manager">
                                <field name="currency_id" invisible="1"/>
                                <field name="property_account_receivable_id"/>
                                <field name="property_account_payable_id"/>
                            </group>
                            <group string="Tax Configuration" name="tax_configuration" groups="jst_lms_group.group_logistic_lms_marketing,jst_lms_group.group_logistic_lms_plan_armada,jst_lms_group.group_logistic_lms_spv,jst_lms_group.group_logistic_lms_cashier,jst_lms_group.group_logistic_lms_revenue_control,jst_lms_group.group_logistic_lms_kacab,jst_lms_group.group_logistic_lms_adh,jst_lms_group.group_logistic_lms_doc_delivery">
                                <field name="tax_invoicing_method"/>
                                <field name="partner_tax_ids" widget="many2many_tags"/>
                            </group>
                            <group string="Credit Limits" name="credit_limits" groups="account.group_account_invoice,account.group_account_readonly" invisible="not show_credit_limit">
                                <field name="credit"/>
                                <field name="days_sales_outstanding"/>
                                <label for="use_partner_credit_limit"/>
                                <div class="o_row">
                                    <field name="use_partner_credit_limit"/>
                                    <field name="credit_limit" class="oe_inline" invisible="not use_partner_credit_limit"/>
                                </div>
                            </group>
                        </group>
                    <group string="Indonesian Taxes" invisible="not l10n_id_pkp">
                        <group>
                            <field name="l10n_id_kode_transaksi"/>
                            <field name="l10n_id_nik"/>
                        </group>
                        <group>
                            <field name="l10n_id_tax_address"/>
                            <field name="l10n_id_tax_name"/>
                        </group>
                    </group>
                    </page>
                    <page string="Accounting" name="accounting_disabled" invisible="is_company or not parent_id" groups="account.group_account_invoice,account.group_account_readonly">
                        <div>
                            <p>Accounting-related settings are managed on <button name="open_commercial_entity" type="object" string="the parent company" class="oe_link"/></p>
                        </div>
                    </page>
                        <page name="internal_notes" string="Internal Notes">
                            <field name="comment" placeholder="Internal notes..."/>
                <group groups="sales_team.group_sale_salesman">
                    <group groups="sale.group_warning_sale" col="2">
                        <separator string="Warning on the Sales Order" colspan="2"/>
                        <field name="sale_warn" nolabel="1" colspan="2" required="1"/>
                        <field name="sale_warn_msg" nolabel="1" string="Message" placeholder="Type a message..." colspan="2" invisible="sale_warn in (False, 'no-message')" required="sale_warn and sale_warn != 'no-message'"/>
                    </group>
                </group>
                    <group groups="purchase.group_purchase_user">
                        <group groups="purchase.group_warning_purchase" col="2">
                            <separator string="Warning on the Purchase Order" colspan="2"/>
                            <field name="purchase_warn" nolabel="1" colspan="2" required="1"/>
                            <field name="purchase_warn_msg" colspan="2" placeholder="Type a message..." nolabel="1" invisible="purchase_warn in (False, 'no-message')" required="purchase_warn and purchase_warn != 'no-message'"/>
                        </group>
                    </group>
                    <group groups="account.group_account_invoice,account.group_account_readonly">
                        <group groups="account.group_warning_account" col="2">
                            <separator string="Warning on the Invoice" colspan="2"/>
                            <field name="invoice_warn" nolabel="1" colspan="2" required="1"/>
                            <field name="invoice_warn_msg" placeholder="Type a message..." colspan="2" nolabel="1" invisible="invoice_warn in (False, 'no-message')" required="invoice_warn and invoice_warn != 'no-message'"/>
                        </group>
                    </group>
                <group groups="stock.group_warning_stock">
                    <group col="2">
                        <separator string="Warning on the Picking" colspan="2"/>
                        <field name="picking_warn" nolabel="1" colspan="2" required="1"/>
                        <field name="picking_warn_msg" placeholder="Type a message..." colspan="2" nolabel="1" invisible="picking_warn in (False, 'no-message')" required="picking_warn and picking_warn != 'no-message'"/>
                    </group>
                </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    <record id="transporter_res_partner_tree" model="ir.ui.view">
        <field name="name">transporter.res.partner.tree</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <tree string="Contacts" sample="1" multi_edit="1">
                <field name="display_name" string="Name"/>
                <field name="function" column_invisible="True"/>
                <field name="phone" class="o_force_ltr" optional="show"/>
                <field name="mobile" optional="hide"/>
                <field name="email" optional="show"/>
                <field name="is_driver" optional="hide"/>
                <field name="is_customer" optional="hide"/>
<!--                <field name="product_filter_id" column_invisible="True"/>-->
                <field name="product_filter_ids" column_invisible="True"/>
                <field name="availability" column_invisible="True"/>
                <field name="license_expiry" string="License Expiry" widget="remaining_days" column_invisible="True"/>
                <field name="is_license_expiring" string="Is Expiry" invisible="not is_driver"/>
                <field name="license_expiry" string="Tanggal Berakhis SIM"/>
                <field name="user_id" optional="show" widget="many2one_avatar_user" domain="[('share', '=', False)]" column_invisible="True"/>
                <field name="activity_ids" optional="show" widget="list_activity"/>
                <field name="city" optional="show"/>
                <field name="state_id" optional="hide" readonly="1"/>
                <field name="country_id" optional="show" readonly="1" column_invisible="True"/>
                <field name="vat" optional="hide" readonly="1"/>
                <field name="ubl_cii_format" string="EDI Format" optional="hide"/>
                <field name="category_id" optional="hide" widget="many2many_tags" options="{'color_field': 'color'}"/>
                <field name="company_id" groups="base.group_multi_company" readonly="1"/>
                <field name="is_company" column_invisible="True"/>
                <field name="parent_id" readonly="1" column_invisible="True"/>
                <field name="active" column_invisible="True"/>
                <field name="account_name_number" string="Nama Rekening"/>
                <field name="ownership_driver_id"/>
                <field name="availability" string="Status Ketersediaan Driver"/>
            </tree>
        </field>
    </record>
    <record id="transporter_res_partner_kanban" model="ir.ui.view">
        <field name="name">transporter.res.partner.kanban</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <kanban sample="1" __validate__="1">
                <field name="id"/>
                <field name="color"/>
                <field name="display_name"/>
                <field name="license_expiry" invisible="1"/>
                <field name="is_license_expiring" invisible="1"/>
                <field name="title"/>
                <field name="email"/>
                <field name="parent_id"/>
                <field name="is_company"/>
                <field name="function"/>
                <field name="phone"/>
                <field name="street"/>
                <field name="street2"/>
                <field name="zip"/>
                <field name="city"/>
                <field name="country_id"/>
                <field name="mobile"/>
                <field name="sale_order_count" groups="sales_team.group_sale_salesman"/>
                <field name="purchase_order_count" groups="purchase.group_purchase_user"/>
                <field name="opportunity_count" groups="sales_team.group_sale_salesman"/>
                <field name="meeting_count"/>
                <field name="state_id"/>
                <field name="category_id"/>
                <field name="avatar_128"/>
                <field name="type"/>
                <field name="activity_state"/>
                <field name="active"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
                            <t t-if="!record.is_company.raw_value">
                                <t t-set="avatar_image" t-value="kanban_image('res.partner', 'avatar_128', record.id.raw_value)"/>
                                <div class="o_kanban_image_fill_left d-none d-md-block">
                                    <img t-attf-src="#{avatar_image}" t-att-alt="record.id.value"/>
                                    <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'avatar_128', record.parent_id.raw_value)"/>
                                </div>
                                <div class="o_kanban_image d-md-none d-block">
                                    <img t-attf-src="#{avatar_image}" t-att-alt="record.id.value"/>
                                    <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'avatar_128', record.parent_id.raw_value)"/>
                                </div>
                            </t>
                            <t t-else="">
                                <div class="o_kanban_image_fill_left d-none d-md-block o_kanban_image_full">
                                    <img t-attf-src="#{kanban_image('res.partner', 'avatar_128', record.id.raw_value)}" role="img" t-att-alt="record.id.value"/>
                                </div>
                                <div class="o_kanban_image d-md-none d-block o_kanban_image_full">
                                    <img t-attf-src="#{kanban_image('res.partner', 'avatar_128', record.id.raw_value)}" role="img" t-att-alt="record.id.value"/>
                                </div>
                            </t>
                            <div class="ribbon ribbon-top-right" invisible="active">
                                <span class="text-bg-danger">Archived</span>
                            </div>
                            <div class="oe_kanban_details d-flex flex-column justify-content-between">
                                <div>
                                    <strong class="o_kanban_record_title oe_partner_heading"><field name="display_name"/></strong>
                                    <div class="o_kanban_tags_section oe_kanban_partner_categories">
                                        <span class="oe_kanban_list_many2many">
                                            <field name="category_id" widget="many2many_tags" options="{'color_field': 'color'}"/>
                                        </span>
                                    </div>
                                    <ul>
                                        <li t-if="record.parent_id.raw_value and !record.function.raw_value"><field name="parent_id"/></li>
                                        <li t-elif="!record.parent_id.raw_value and record.function.raw_value"><field name="function"/></li>
                                        <li t-elif="record.parent_id.raw_value and record.function.raw_value"><field name="function"/> at <field name="parent_id"/></li>
                                        <li t-if="record.city.raw_value or record.country_id.raw_value">
                                        <t t-if="record.city.raw_value"><field name="city"/><t t-if="record.country_id.raw_value">, </t></t>
                                        <t t-if="record.country_id.raw_value"><field name="country_id"/></t>
                                        </li>
                                        <li t-if="record.email.raw_value" class="o_text_overflow"><field name="email"/></li>
                                        <br/>
<!--                                        <li><field name="product_filter_id"/></li>-->
                                        <li><field name="product_filter_ids"/></li>
                                    </ul>
                                </div>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <a t-if="record.meeting_count.value&gt;0" data-type="object" data-name="schedule_meeting" href="#" class="oe_kanban_action oe_kanban_action_a me-1">
                                            <span class="badge rounded-pill">
                                                <i class="fa fa-fw fa-calendar" aria-label="Meetings" role="img" title="Meetings"/>
                                                <t t-out="record.meeting_count.value"/>
                                            </span>
                                        </a>
                                        <a t-if="record.opportunity_count.value&gt;0" href="#" groups="sales_team.group_sale_salesman" data-type="object" data-name="action_view_opportunity" class="oe_kanban_action oe_kanban_action_a me-1">
                                            <span class="badge rounded-pill">
                                                <i class="fa fa-fw fa-star" aria-label="Opportunities" role="img" title="Opportunities"/>
                                                <t t-out="record.opportunity_count.value"/>
                                            </span>
                                        </a>
                                        <a t-if="record.purchase_order_count.value&gt;0" data-type="action" data-name="542" groups="purchase.group_purchase_user" href="#" class="oe_kanban_action oe_kanban_action_a me-1">
                                            <span class="badge rounded-pill">
                                                <i class="fa fa-fw fa-credit-card" role="img" aria-label="Purchases" title="Purchases"/>
                                                <t t-out="record.purchase_order_count.value"/>
                                            </span>
                                        </a>
                                        <a t-if="record.sale_order_count.value&gt;0" data-type="object" data-name="action_view_sale_order" groups="sales_team.group_sale_salesman" href="#" class="oe_kanban_action oe_kanban_action_a me-1">
                                            <span class="badge rounded-pill">
                                                <i class="fa fa-fw fa-usd" role="img" aria-label="Sale orders" title="Sales orders"/>
                                                <t t-out="record.sale_order_count.value"/>
                                            </span>
                                        </a>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                </div>
                                <!-- Add custom elements to kanban body -->
                                <xpath expr="//div[hasclass('o_kanban_record_body')]" position="outside">
                                    <div t-if="record.license_expiry.raw_value" class="mt-2">
                                        <small>Expiry: </small>
                                        <strong t-esc="record.license_expiry.raw_value"/>
                                    </div>
                                    <div t-if="record.is_license_expiring.raw_value" class="oe_kanban_badge text-bg-danger mt-2">
                                      ðŸ””  SIM akan kedaluwarsa dalam 30 hari!
                                    </div>
                                </xpath>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

<!--    <record id="s_button_driver_form_inherit_bju" model="ir.ui.view">-->
<!--        <field name="name">s.button.driver.form.inherit.bju</field>-->
<!--        <field name="model">res.partner</field>-->
<!--        <field name="inherit_id" ref="base.view_partner_form"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <xpath expr="//div[@name='button_box']" position="inside">-->
<!--                <button name="action_view_diciplinaries"-->
<!--                        type="object"-->
<!--                        class="oe_stat_button"-->
<!--                        icon="oi-group" invisible="not is_driver">-->
<!--                    <field name="diciplinary_count" widget="statinfo" string="Diciplinary Record"/>-->
<!--                </button>-->
<!--            </xpath>-->
<!--        </field>-->
<!--    </record>-->

    <record id="transporter_driver_action" model="ir.actions.act_window">
        <field name="name">Driver</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,tree,form,map,activity</field>
        <field name="context">{'default_is_driver': 1, 'create': False, 'edit': False, 'delete': False}</field>
        <field name="domain">[('is_driver', '=', True)]</field>
    </record>

    <record id="transporter_driver_action_tree_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="3"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="transporter_res_partner_tree"/>
        <field name="act_window_id" ref="transporter_driver_action"/>
    </record>

    <record id="transporter_driver_action_form_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="transporter_res_partner_form"/>
        <field name="act_window_id" ref="transporter_driver_action"/>
    </record>

    <record id="transporter_driver_action_kanban_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="transporter_res_partner_kanban"/>
        <field name="act_window_id" ref="transporter_driver_action"/>
    </record>

    <record id="res_partner_transporter_action" model="ir.actions.act_window">
        <field name="name">Contacts</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,form,tree</field>
        <field name="context">{'default_is_company': True}</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {
            'view_mode': 'kanban',
            'view_id': ref('jst_demo_kalla_bju_transporter.transporter_res_partner_kanban'),
            'sequence': 0
            }),
            (0, 0, {
            'view_mode': 'form',
            'view_id': ref('jst_demo_kalla_bju_transporter.transporter_res_partner_form'),
            'sequence': 1
            }),
            (0, 0, {
            'view_mode': 'tree',
            'view_id': ref('jst_demo_kalla_bju_transporter.transporter_res_partner_tree'),
            'sequence': 1
            }),
        ]"/>
    </record>

    <menuitem
        id="contact_transporter"
        name="Contact"
        action="res_partner_transporter_action"
        groups="base.group_user,base.group_partner_manager"
        parent="jst_demo_kalla_bju_transporter.root_transporter"
        />

    <menuitem
        id="driver_transporter"
        name="Driver"
        action="transporter_driver_action"
        parent="fleet.menu_root"
        sequence="2"/>
</odoo>
